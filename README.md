# Reproducible Research Analysis – Magnetic Resonance in Medicine (2025)

This repository provides a fully reproducible pipeline to analyze open-science practices in Magnetic Resonance in Medicine (MRM). It reproduces and extends Boudreau et al. (2022) analyses by detecting code/data sharing, gender and country patterns, and statistical associations, using PDFs and Python scripts.
It does it by analyzing:
- code and data sharing,
- author gender,
- author affiliation country,
- and statistical associations between these variables.
All steps are transparent, script-based, and designed to be replicated by others.

## What this repository does
Using article PDFs and an OSF-style Excel workbook, this project allows you to:
- Sort MRM articles by acceptance month
- Detect open-science keywords in PDFs
- Manually curate sharing decisions (as in the original study)
- Compute statistics on:
    - code and data sharing
    - author gender
    - author affiliation country
- Run statistical tests (chi-square, effect sizes)
- Generate publication-ready plots

## What you need before starting
You will need:
- Python 3.9+
- A folder containing PDFs of MRM articles for a given year (list of article to dowload obtained with get_mrm_dois_by_year.py)
- An OSF-style Excel workbook (generated by the scripts)
Attention: PDFs are not included in this repository due to copyright restrictions.

## Installation
Create and activate a virtual environment, then install dependencies:

'pip install -r requirements.txt'

# Reproducing the 2025 analysis

## 1. Retrieve DOI list for the year
This step queries Crossref to list all MRM articles for a given year.

'python scripts/get_mrm_dois_by_year.py \
  --year 2025 \
  --out data/derived/doi_2025.csv'

Here the output is in mrm-reproducible-research-2025/data/derived/mrm_2025_dois.csv

## 2. Sort PDFs by acceptance month and create the workbook
This script:
- reads PDFs,
- extracts acceptance dates,
- sorts PDFs into month folders,
- creates an OSF-style Excel workbook (January–December sheets).
- 
'python scripts/sort_mrm_pdfs_by_acceptance_and_build_workbook.py \
  --year 2025 \
  --pdf-folder path/to/your/2025_pdfs'
  
Output:
- 2025-MRMH-ReproducibleResearch_acceptance.xlsx

## 3. Scan PDFs for open-science keywords
This step replicates the original keyword-based screening.

'python scripts/scan_keywords_update_workbook.py \
  --year-folder path/to/your/2025_pdfs \
  --xlsx workbooks/2025/2025-MRMH-ReproducibleResearch_acceptance.xlsx'

The column “Keywords Matched” is automatically filled.

## 4. Manual validation (long but important)
As in the original study, you must manually verify:
- False Positive?
- Shared code?
- Shared data?
- Language(s)

This step ensures scientific veracity.

## 5. Run the main statistical analysis
This script reproduces and extends the original notebook analysis.

'python scripts/run_mrm_analysis_local.py'

Outputs:
- Summary statistics (Excel)
- Link usage counts (CSV)
- Gender-conditioned sharing statistics
- Chi-square test results

## 6. Generate plots (gender & sharing)

'python scripts/plot_mrm_results_pretty.py'

Creates pretty figures.

## 7. Extract author affiliation country from PDFs
This script:
- parses the first affiliation of the first author directly from PDFs,
- infers the country,
- adds a new column to the workbook.

'python scripts/add_affiliation_country_from_pdfs.py \
  --year-folder path/to/your/2025_pdfs \
  --xlsx workbooks/2025/2025-MRMH-ReproducibleResearch_acceptance.xlsx'

## 8. Run country-based analysis

'python scripts/run_country_analysis.py'

This computes:
- proportion of papers by country,
- proportion of sharing papers conditioned on country,
- chi-square test and effect size.

## 9. Generate country plots

'python scripts/plot_country_results_pretty.py'

Plots include:
- top publishing countries,
- sharing rates by country,
- volume vs sharing behavior.

# Full procedure documentation
A detailed, step-by-step description of the entire workflow is available in:
docs/PROCEDURE_MRM_2025_REPRODUCIBLE_RESEARCH.txt
>>>>>>> 63c2389 (Initial commit: MRM reproducible research pipeline (2025))
